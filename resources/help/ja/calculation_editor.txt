.. _calculation_editor:

計算値編集画面
========================

このダイアログで、同じレコードの他のフィールドの値からの算出値を持つフィールドを定義できます。フィールドエディタ画面で"計算編集"ボタンを押すと起動するダイアログで、フィールドタイプが"計算値"の時にのみ表示されます。このダイアログの最上部にはフィールド名、読み取り専用の１行の数式で表した現在の数式の表示部、計算結果を何桁まで表示するかを選択するスピンボックスがあります。

ダイアログの大部分は多くのファイルエクスプローラにも似た、ツリー状に現在の計算式を表示するウィジェットで占められています。ツリー上のノードはそれぞれ、他のフィールドの値、定数,または演算子のいずれかを表示しています。計算式を編集するには、（もし既にあれば）ツリーからノードを選択し、ダイアログのボタンを使用します:

**作成**
  新しいノードを、現在選択しているノードの子として追加します: ノードの値のタイプを選択するためのダイアログが表示されます。

**編集**
  選択されているノードを編集します。

**削除**
  選択されているノードを削除します。

**上げる**
  選択されているノードをその兄弟の間で上に移動します。

**下げる**
  選択されているノードをその兄弟の間で下に移動します。

通常は、例えば"+"などの演算子ノードの追加から始め、その引き数（それ自身も引き数を持った演算子ノードでも構いません）を追加します。ボタンは、現在選択されているノードに対してそのアクションが実行できる時には、自動的に更新されます; 許可されないアクションは、例えば次のようなものです:

* 演算子ノードが既に扱える最大の個数の引き数を持っている時の、子ノードの追加。

* 演算子ノードの編集; 編集した値は削除され、代替値で置き換えられます。

* その方向にそれ以上動かせない時のノードの"上げる"と"下げる"。

以下は蛇足ですが:

* 計算には、整数値、数値、番号、真偽フィールドを使うことができます。加えて、日付フィールドを"Days_Between"操作の時に、時刻フィールドを"Seconds_Between"、"Minutes_Between"、それから"Hours_Between"フィールドで使うことができます。

* 計算値フィールドは、さまざまな複合問題を引き起こしかねないので、他の計算値フィールドでは使えません。同じ効果は、計算値の定義を他の計算値の一部として繰り返すことで得られます。

* 操作に必要なだけの引き数が（あるいは引き数が全く）渡されなかった場合は、通常、０が返されます。

* フィールドエディタでフィールド名が変更された時やフィールドが削除された時は、いずれの計算値も変更内容にしたがって自動的に更新されます。
