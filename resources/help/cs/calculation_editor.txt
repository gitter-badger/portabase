.. _calculation_editor:

Editor výpočtů
==============

Tento dialog umožňuje nadefinovat sloupce obsahující hodnoty vypočtené z hodnot jiných sloupců stejného záznamu. Editor výpočtů lze vyvolat pouze u sloupců typu výpočet v Editoru sloupců po stisku tlačítek "Editovat" a následně "Editovat výpočet". V horní části dialogu nalezneme jméno sloupce, needitovatelné jednořádkové zobrazení stávajícího výpočtu a volbu počtu desetinných míst udávajících přesnost výpočtu.

Největší část dialogu zabírá zobrazení stromové struktury stávajího výpočtu v podobě známé např. ze souborových správců. Každá větev představuje buď hodnotu některého sloupce, konstantu nebo výsledek početní operace. Chcete-li výpočet editovat, vyberte příslušnou větev (je-li dostupná) a použijte tlačítka z dolní části dialogu:

**Přidat**
  Přidá novou větev jako podřízenou větve vybrané; objeví se dialog umožňující výběr typu operace a hodnoty.

**Editovat**
  Umožní editaci vybrané větve.

**Smazat**
  Smaže vybranou větev.

**Posunout nahoru**
  Posune vybranou větev o jednu pozici výše mezi větvemi stejné úrovně.

**Posunout dolů**
  Posune vybranou větev o jednu pozici níž mezi větvemi stejné úrovně.

Doporučujeme začít výběrem početní operace (např. "+") a následným přidáváním jejích argumentů (kterými mohou být i operace s jejich vlastními argumenty). V závislosti na tom, jaká větev je vybrána, se mění podoba tlačítek - tlačítka nepovolených funkcí jsou zašedlá; typickými nepovolenými akcemi jsou:

* Přidání podřízené větve operaci s již dosaženým maximálním počtem argumentů

* Změna typu početní operace; změnu lze provést jen smazáním a nahrazením stávající operace

* Posun větve nahoru či dolů, nelze-li již větev daným směrem dále posunovat

Důležité připomínky:

* Pro výpočty lze použít jen sloupce typu integer, decimální a sekvence. Navíc je možné použít sloupce typu datum jako podřízené pro operaci "Počet_dnů_mezi" a sloupce typu čas jako podřízené pro operace "Počet_sekund_mezi", "Počet_minut_mezi" a "Počet_hodin_mezi".

* Sloupce typu výpočet nelze použít pro jiné výpočty z důvodu předcházení nejrůznějším komplikacím. Stejného výsledku lze dosáhnout opakovaným použitím stejné definice jako součásti jiného výpočtu.

* Operace s nedostatkem (či bez) argumentů obvykle vracejí nulu.

* Byl-li sloupec v Editoru sloupců přejmenován či smazán, jsou výpočty, které jej používají, podle toho automaticky zaktualizovány.
