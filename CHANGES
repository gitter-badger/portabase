2003-05-24  JMB  Better menu handling in desktop versions

    In at least some versions of Qt3, the menu was present but no text was
    shown.  Now using a more normal display method which seems to work more
    reliably.

2003-05-23  JMB  Alternate row shading, calculator widget

    Even and odd rows now use different background colors to make it easier
    to follow a row across the screen.  The default colors are white and
    light gray, but can be specified via buttons in the Preferences dialog.
    These colors are used in the data viewer, columns editor, view editor,
    and sorting editor.

    At the end of each entry field for a numeric value (type integer or
    decimal), there is a button which will launch a simple calculator,
    starting with the currently displayed value.  Clicking OK will place
    the current result into the entry field.  This makes it easier to enter
    data that needs to be calculated before entry, and is often faster than
    entering a number via the keyboard or an on-screen input method.

2003-04-10  JMB  Windows CSV import bugfix

    In version 1.6, importing a CSV file on the Windows version would produce
    an empty error dialog and fail to update the display even though the
    import was successful; this has been corrected.

2003-04-03  JMB  Enum update bugfix, file overwrite warning

    When the value of an enum was changed, its index wasn't updated in the
    data table, so it was sorted and filtered as if its value hadn't changed;
    this has been corrected.

    The desktop versions now launch a confirmation dialog if you choose an
    existing file when selecting the path to a new PortaBase file.  Useful
    if you accidentally click "New" instead of "Open" and don't realize it.

2003-04-02  JMB  XML export bugfix, desktop import bugfix

    Version 1.6 accidentally exported an element called "gcrypt" indicating
    whether the source file was encrypted or not; this is no longer exported,
    and the XML import will gracefully ignore it if present.

    The desktop version of 1.6 prompted for a text encoding even when
    importing XML files and MobileDB files; this wasn't necessary and is
    no longer done.

2003-03-30  #################### PortaBase 1.6 ####################

2003-03-30  JMB  CSV import enhancements, menu update bugfix

    If an imported row doesn't have enough columns and the last few
    columns are strings or notes, PortaBase now treats those fields as
    empty strings.  (There often aren't enough delimiters at the end of
    lines ending with blank fields when exporting from programs like Excel,
    this just corrects for that.)

    CSV files can now be imported as either UTF-8 or Latin-1; this avoids
    the need for users importing files exported from other programs in
    Latin-1 to use another program to perform an encoding conversion.

    In version 1.5, making changes in the format editor would clear the
    view, sorting, and filter lists from the menus without restoring them;
    they are now populated correctly again.

2003-03-27  JMB  Japanese UI translation, better CSV import error messages

    The entire PortaBase interface has now been translated into Japanese.
    I also improved the error messages provided upon CSV import failure;
    cases where it used to just say "Wrong number of columns" now specify
    which columns are missing or which values are extra, and it shows the
    full data row which failed to import correctly.

2003-03-19  JMB  Data file encryption

    PortaBase data files can now be encrypted (using Blowfish in CBC mode
    with a 160-bit key generated by running the password through SHA-1).
    More details will be posted on the web site when 1.6 is released.
    Encryption is an option chosen when the file is created; to encrypt
    an existing file, export it to XML and import the result as a new
    encrypted file.

2003-03-01  JMB  Command-line CSV import and export

    You can now import and export CSV files from the command line by using
    the "fromcsv" and "tocsv" commands; usage is basically identical to
    "fromxml" and "toxml", except that for "fromcsv" the target file must
    be an existing PortaBase file.

2003-02-28  JMB  Default sortings and filters for views

    You can now specify a default sorting and/or filter for each view
    (except the "All Columns" view, which cannot be edited).  This makes
    it faster to switch to commonly used view/sorting/filter combinations.
    If the defaults are not "None", they are applied when switching to
    the view; you can then freely change the sorting and filter again.
    If "None", the current sorting and filter are retained, as it has always
    worked.

2003-02-27  JMB  Enum option index sorting/filtering, enum manager bugfix

    Changed enum sorting to sort by option index instead of option text.
    Enum filter conditions changed to match, allowing the full set of
    numeric inequality operators.

    Fixed a bug in the enum manager which caused a crash if you exited
    without making any changes (bug introduced in 1.5).

2003-02-26  JMB  File rename and copy menu items

    The file selector's "File" menu now has "Rename" and "Copy" items
    which do what you'd expect.  (Zaurus version only)

2003-02-25  JMB  File->Row menu, row copy

    Added a "Row" submenu to the data viewer's "File" menu to replace the
    old top-level menu of the same name that was removed due to lack of
    space.

    Added a "Copy" action to the new Row menu, which launches the row
    editor to create a new row, but filled with the currently selected
    row's data instead of the default values.

2003-02-24  JMB  Fixed XML import bug, command-line error message encoding

    The XML importer was retrieving column values by index instead of
    ID, leading to import failure in many cases; fixed.

    Error messages shown during command-line usage should now be using
    a reasonable encoding for the locale; hopefully this will allow the
    display of Japanese text on the Japanese Zaurus models.

2003-02-19  JMB  Better XML import error messages

    Don't overwrite meaningful error message with useless generic error
    message.  Fixes behavior on Zaurus and Windows.

2003-02-12  #################### PortaBase 1.5 ####################

2003-02-12  JMB  Assorted bug fixes and code cleanup

    In the process of testing the code for a 1.5 release, fixed an
    assortment of minor usability bugs, compiler warnings, and so on.

2003-02-10  JMB  Import file selector crash fix

    Fixed a crash when clicking "OK" in the import file selector instead
    of clicking on one of the listed files.  (Zaurus version only)

2003-02-09  JMB  XML import, command-line format conversions,
                 minor enum manager enhancement

    New PortaBase files can now be created from PortaBase-format XML files
    as well as MobileDB files; the file selector's File->Import option
    now covers both cases.  This means that PortaBase content can now
    be exported to XML, edited by hand or by script, and imported back in
    as a new file.  Or files can be programatically generated, including
    views, filters, etc.

    PortaBase can now be used from the command line to create PortaBase
    files from XML or MobileDB files, and to export PortaBase files to XML
    (optionally specifying the view, sorting, and/or filter to apply first).
    This should make it fairly easy to write scripts that create or
    manipulate PortaBase data files.  Check the help file or run
    "portabase -h" for details on the syntax.

    The enum manager now doesn't mark the file as needing to be saved unless
    a change was actually performed.

2003-02-06  JMB  Assorted minor enhancements

    Added size grips for dialogs on the Windows version.

    Compensated for the lack of dialog titles in the Non-Commercial
    version of Qt for Windows; each dialog on that platform now has the
    dialog name in bold text just below the title bar.

    The text area of the note editor now has the focus when the dialog
    is shown (don't need to click or tab before starting to type).

    The name entry field of the column editor now has the focus each time
    it is shown.

2003-02-03  JMB  XML export

    When you choose "Export" from the File menu, you now have the option
    of exporting to XML.  The exported XML file contains all the
    information needed to completely recreate the data file as the user
    experiences it (including views, filters, etc.)  It can also be used
    to generate HTML via XSLT files, or manipulated in any other way
    XML is normally handled.  A few examples and more info will be posted
    on the web site along with the version 1.5 release.

2003-01-30  JMB  Allow word wrap in Note editor/viewer, added Preferences
                 and Refresh options to file selector menu, edit button in
                 row viewer

    The Note editor/viewer now uses word wrapping by default; this can
    be disabled in the preferences dialog.  There is also a preference
    setting which allows wrapping to be done even between non-whitespace
    characters (useful for languages like Japanese).

    The Preferences dialog can now be launched from the file selector's
    "File" menu, so you don't need to open a file before changing your
    application settings.

    Added an edit button to the row viewer, so you can edit the currently
    visible row without first returning to the data viewer.

    Added a "Refresh" option to the file selector menu to check for
    recently added or deleted files.  This wasn't being done when
    re-launching the program if "Fast load" was enabled.  Also, this is no
    longer done automatically after closing a non-new file, because it can
    be slow (especially when using a CF and/or SD card).  Zaurus version
    only.

2003-01-28  JMB  Support use as a Linux or Windows desktop application

    Made a wide variety of minor code changes that allow PortaBase to
    be compiled for use as a Linux or Windows desktop application; I've
    checked in the files needed to build a Debian package and a Windows
    installer.  So PortaBase 1.5 will be released for the Zaurus,
    Debian GNU/Linux, and Windows; data files created with any of these
    versions can be opened with any of the others (and the desktop
    versions store column widths and rows per page settings independent of
    those used on the Zaurus, due to radically different screen sizes).
    This should make it much easier to keep data synchronized between the
    Zaurus and PCs, or PortaBase can be used as a standalone desktop
    application.

2003-01-26  JMB  Time column "Now" default bugfix, Qt NC license clause

    Time columns which were set to "now" were using a default value of
    midnight instead; should now work correctly.

    Added an exception to the license to allow use of the Non-Commercial
    version of Qt for Windows (not allowed using the unmodified GPL).

2003-01-13  ################### PortaBase 1.4.1 ###################

2003-01-13  JMB  Fixed upgrade of files that use filters

    Converting any PortaBase file that used filters to a newer version
    has often created corrupt files due to a bug in the filter conditions
    table.  1.4 contained an attempted fix which didn't fully correct the
    problem, this should (although already corrupted files still cannot
    be opened.)

2003-01-07  #################### PortaBase 1.4 ####################

2003-01-07  JMB  Increased maximum rows per page, space launches row viewer

    You can now show up to 9999 rows in a page instead of 999.  Whether
    there's enough memory on the Zaurus to handle that many rows gracefully is
    another question. ^_^

    Just noticed that the center of the direction pad is treated as a
    space bar instead of an enter key, so that now also works to launch the
    row viewer.

2003-01-05  JMB  Row viewer/browser

    Added a row viewer based on a patch I received.  To launch it, either
    double-tap on a row or press enter while the desired row is selcted.
    Includes next and previous buttons to navigate between rows in the
    current view (left and right on the direction pad also work).

2003-01-04  JMB  File selector menu & toolbar, MobileDB import, better
                 sizing of column and condition editor dialogs, file extension
                 added for new files

    The file selector now has a "File" menu and 3 toolbar buttons; in
    addition to the previous functionality, these let you delete existing
    files.  The File menu also contains an option to create a new file
    from the data in a MobileDB file; MobileDB is a popular database
    program for PalmOS, many reference database files and such can be
    downloaded for it at no cost.

    Applied a patch to improve sizing of the column editor and condition
    editor dialogs; the hard-coded values didn't work well on the SL-C700.

    Another patch for the SL-C700; new files now have the ".pob" extension
    added so they show up correctly in the "Files" tab.

2002-12-07  JMB  Time columns, date picker uses appropriate week start day

    There is now a "Time" column type.  It uses the Qtopia system setting
    for 12/24 hour display preference, and there is a "Show Seconds"
    checkbox in the PortaBase preferences dialog.  Times in imported CSV
    files can be formatted in either 12 or 24 hour format, or in number
    of seconds past midnight, or -1 or blank for a "None" time.

    The date picker calendar widget now uses the Qtopia system setting
    for which day the week starts on (Sunday or Monday) and displays the
    calendar appropriately.

2002-12-01  JMB  Bugfix in filter condition indices, filtered export

    The data column for filter condition position indices had been declared
    incorrectly, causing problems when loading filters from older format
    PortaBase files; this should be fixed now (although the original
    condition order is often not recoverable; a new valid order is defined).

    The CSV export feature now exports only rows which pass the current
    filter.  For the old "export all" behavior, just select the "All Rows"
    filter before exporting.

2002-11-30  JMB  Case sensitivity bugfix

    Applied a patch to MetaKit that allows c4_View Finds and Selects to be
    case sensitive (which I thought they already were).  This fixes
    several bugs related to columns, views, sortings, and filters which
    have names differing only by case.

2002-11-29  JMB  Optional checkbox toggle in data viewer, date selector
                 enhancements

    Added a preference which when checked allows you to toggle boolean
    values directly in the data viewer by clicking the appropriate cell.
    This makes it more convenient to use PortaBase as a todo list, but
    also makes it easier to accidentally change data values.

    Changed the date selector dialog so that the month is displayed as
    a droplist and the year is displayed as a spinbox; thus both can
    be changed directly to any desired value without having to
    repeatedly press the next or previous buttons.

2002-11-26  JMB  UTF-8 CSV file import

    Fixed a one-line bug which caused CSV files to be imported as Latin-1
    instead of UTF-8.

2002-11-25  #################### PortaBase 1.3 ####################

2002-11-24  JMB  Enum columns

    Added support for enum columns (otherwise known as enumerations,
    pop-ups, string lists, etc.)  There is a new "Edit Enums" item in the
    "File" menu, and as a shortcut enums can be defined when creating a
    new column by selecting "(New Enum)" as the type.

2002-11-19  JMB  Better precision on decimal fields, "default defaults"

    In previous releases, decimal fields were only shown with six
    significant digits.  Now the entered string representation is stored
    along with the floating point number obtained from it, so when browsing
    the data or editing rows, these values are displayed exactly as they
    were entered.

    When adding a new column and you pick either Integer or Decimal as the
    type, the current content (if any) of the default value entry box is
    examined; if not valid for the new type it is replaced with 0 (for
    integers) or 0.0 (for decimals).  This way you aren't forced to enter
    a default value if you don't care what it is.

2002-11-17  JMB  Font selection, empty date fields, delete confirmations,
                 delete rows in filter

    There is now a preferences dialog (available under File->Preferences)
    which allows you to choose the font used throughout PortaBase.  This
    can be used, for example, to select a font capable of displaying
    Japanese characters or to choose a smaller font size in order to fit
    more information on the screen (although a bit less legibly).

    Date fields can now be displayed as empty; either choose "None" as
    the default value in the column editor or click the "None" button
    next to the date in the row editor.  Empty dates are treated
    internally as September 14, 1752 (the first day of the Gregorian
    calendar), and behave accordingly in sorting, filtering, and column
    statistics dialogs.

    There is now an option to show delete confirmation dialogs whenever
    you delete a row, view, sorting, or filter.  To enable these, check
    "Delete Confirmations" under File->Preferences.

    There is a new "Delete Rows In Filter" option in the "File" menu,
    which deletes all rows that pass the current filter.  Thus you can
    select the "All Rows" filter and purge the database in preparation
    for a new CSV import, or use a filter to delete all rows where
    a date field is earlier than a certain value, and so on.

2002-11-16  JMB  Unicode support

    The encoding for all text in PortaBase files has been changed from
    Latin-1 to UTF-8; old files are automatically converted to the new
    encoding when opened.  Unicode characters can now be used in row
    data, column names, view names, filter names, etc.

2002-11-12  JMB  Better handling of import failure

    A failed CSV import now leaves the database in the same condition
    it was in before the attempt.  Before, it was adding rows
    processed before the error and not immediately updating the
    display to show that this had happened.

2002-11-10  #################### PortaBase 1.2 ####################

2002-11-10  JMB  Date columns, crash fixes, toolbar changes

    Added support for date columns; values are entered using a calendar
    widget.

    Fixed bugs in the data viewer, sorting editor, and view editor which
    could cause a crash if you clicked in the wrong place.

    Due to space considerations, made some changes to the menus and
    toolbar.  The "Find" menu was renamed "Filter", and the "Find"
    toolbar button was moved to the "Quick" option under the "Filter"
    menu.

2002-11-09  JMB  Filtering, "All Columns" sequence bugfix

    Added the "Find" menu, providing support for multiple-condition
    filters using an interface very similar to that of views and sortings.
    Removed the "Row" menu in order to make room for it.

    Also added the "Find" toolbar button, which is a faster way to create
    a 1-condition temporary filter.

    Fixed a bug introduced by the "All Columns" view updating feature that
    caused a crash when creating a new database.

2002-11-01  JMB  Improved Note field display, update "All Columns" sequence

    Note fields are now shown as intended in the data viewer; as many
    characters from the start of the note as will fit are shown, with
    linebreaks converted to spaces.  In 1.1 only one row of the note was
    being shown, and not necessarily the first one.

    The "All Columns" view now tracks changes to the sequence of columns so
    it matches the order in the columns editor and row editor.

2002-10-30  JMB  Dialog resizing, save enable/disable, hold on row to edit

    All full-screen dialogs should now resize correctly when input methods
    are hidden or shown.

    The save icon and menu item are now enabled only when there are unsaved
    changes.  (Including changes of view, sorting, rows per page, etc.)

    Pressing and holding on a row in the data viewer for 1/2 second or
    longer now launches the row editor (except if you press in a Note
    column; this still shows the Note viewer).

2002-10-28  #################### PortaBase 1.1 ####################

2002-10-28  JMB  Multiple column sorting

    Added support for sorting on multiple columns.

2002-10-26  JMB  Note column type, minor bugfixes

    Added support for "Note" columns (a.k.a. multi-line text fields).

    Count change of view to "All Columns" as a change that the user should
    be prompted to save before closing.

    Removed help file sentence about ".csv" being appended to export files;
    true in the test environment, but apparently not on the Zaurus.

2002-10-22  JMB  View editor crash bugfix

    Fixed a crash that occurred when saving changes to an existing view.

2002-10-21  JMB  Fixed CSV export

    The text/x-csv directory is now created if it doesn't exist, and a
    ".desktop" file is created so the CSV file appears in the Documents tab.

2002-10-19  #################### PortaBase 1.0 ####################
